# ๐ง ุฏููู ุฅุตูุงุญ ูุดุงูู ููุญุฉ ุงูุชุญูู ูุงูู Database

## ุงููุดุงูู ุงูุชู ุชู ุงูุชุดุงููุง:

### 1. โ ูุดููุฉ ูู Navbar.tsx
- ุงูููุฏ ุงูุฎุงุต ุจุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ูุงู **ููุณูุฑุงู ุชูุงูุงู**
- ุงูุณุทูุฑ 17-24 ูุงูุช ุบูุฑ ุตุญูุญุฉ ููุง ููุฌุฏ `useEffect` ูุงูู
- **ุชู ุงูุฅุตูุงุญ โ**: ุชู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูู useEffect ุจุดูู ุตุญูุญ

### 2. โ ูุดุงูู ูู Database RLS Policies
- ุงูุตูุงุญูุงุช ุบูุฑ ูุถุจูุทุฉ ุจุดูู ุตุญูุญ
- ูุฏ ุชููู ููุงู ูุดุงูู ูู ุฌูุจ ูุญูุธ ุงูุจูุงูุงุช
- **ุงูุญู โ**: ููู SQL ุดุงูู ุชู ุฅูุดุงุคู

### 3. โ ูุดุงูู ุนูุฏ ุฑูุน ุนุฏุฉ ูุตูู
- ูุฏ ูููู ุจุณุจุจ ุนุฏู ูุฌูุฏ batch processing ุตุญูุญ
- **ุชู ุงูุฅุตูุงุญ โ**: ุงูููุฏ ูู admin/page.tsx ูุณุชุฎุฏู batch upload

---

## ๐ ุฎุทูุงุช ุงูุฅุตูุงุญ (ูุฌุจ ุชูููุฐูุง ุจุงูุชุฑุชูุจ):

### ุงูุฎุทูุฉ 1: ุชุทุจูู ุฅุตูุงุญ ุงูู Database โ๏ธ **ููู ุฌุฏุงู**

1. ุงูุชุญ **Supabase Dashboard**: https://supabase.com/dashboard
2. ุงุฐูุจ ุฅูู ูุดุฑูุนู
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **SQL Editor**
4. ุงูุชุญ ููู `COMPLETE_DATABASE_FIX_V2.sql` ูู ุงููุดุฑูุน
5. ุงูุณุฎ **ูู** ูุญุชูู ุงูููู
6. ุงูุตูู ูู SQL Editor
7. ุงุถุบุท ุนูู **Run** ุฃู **F5**
8. ุงูุชุธุฑ ุญุชู ููุชูู ุงูุชูููุฐ (ูุฏ ูุณุชุบุฑู 10-30 ุซุงููุฉ)
9. ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู ุงููุชุงุฆุฌ

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุงูุจูุงูุงุช

ุจุนุฏ ุชูููุฐ ุงูู SQLุ ูุฌุจ ุฃู ุชุฑู ูู ุงููุชุงุฆุฌ:
```
Profiles count: [ุนุฏุฏ ุงููุณุชุฎุฏููู]
Mangas count: [ุนุฏุฏ ุงููุงูุฌุง]
Chapters count: [ุนุฏุฏ ุงููุตูู]
Super admins: 1 (ุนูู ุงูุฃูู)
Admins: [ุงูุนุฏุฏ]
Editors: [ุงูุนุฏุฏ]
```

### ุงูุฎุทูุฉ 3: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู

1. ูู Terminalุ ุงุถุบุท `Ctrl+C` ูุฅููุงู ุงูุณูุฑูุฑ
2. ุดุบู ุงูุณูุฑูุฑ ูุฑุฉ ุฃุฎุฑู:
   ```bash
   npm run dev
   ```

### ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุนูู ููุญุฉ ุงูุชุญูู

1. ุงูุชุญ ุงููููุน: http://localhost:3000
2. ุณุฌู ุฏุฎูู ุจุญุณุงุจ ุงูู Admin: `dfk_admin2002@gmail.com`
3. ูุฌุจ ุฃู ุชุฑู **ุฒุฑ ููุญุฉ ุงูุชุญูู** ูู ุงูู Navbar
4. ุงุถุบุท ุนููู ููุฏุฎูู ุฅูู ููุญุฉ ุงูุชุญูู
5. ุชุญูู ูู ุฃู ุฌููุน ุงูุฃูุณุงู ุชุนูู:
   - โ ุฑูุน ูุถุบูุท (Bulk)
   - โ ุฑูุน ูุฑุฏู
   - โ ุฅุถุงูุฉ ุนูู
   - โ ุงููุญุชูู
   - โ ุงููุฑูู

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงุฆู:

### ุงุฎุชุจุงุฑ 1: ุฅุถุงูุฉ ูุงูุฌุง ุฌุฏูุฏุฉ
1. ุงุฐูุจ ุฅูู ุชุจููุจ "ุฅุถุงูุฉ ุนูู"
2. ุงููุฃ ุงูุจูุงูุงุช
3. ุงุฑูุน ุตูุฑุฉ ุงูุบูุงู
4. ุงุฎุชุฑ ุงูุชุตูููุงุช
5. ุงุถุบุท "ุญูุธ"
6. ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ "โ ุชู!"

### ุงุฎุชุจุงุฑ 2: ุฑูุน ูุตู ูุงุญุฏ
1. ุงุฐูุจ ุฅูู ุชุจููุจ "ุฑูุน ูุฑุฏู"
2. ุงุฎุชุฑ ุงููุงูุฌุง
3. ุฃุฏุฎู ุฑูู ุงููุตู
4. ุงุฑูุน ุงูุตูุฑ
5. ุงุถุบุท "ูุดุฑ ุงููุตู"
6. ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ "โ ุชู ุงููุดุฑ!"

### ุงุฎุชุจุงุฑ 3: ุฑูุน ุนุฏุฉ ูุตูู (Bulk)
1. ุงุฐูุจ ุฅูู ุชุจููุจ "ุฑูุน ูุถุบูุท (Bulk)"
2. ุงุฎุชุฑ ุงููุงูุฌุง
3. ุงุฑูุน ููู ZIP ูุญุชูู ุนูู ูุฌูุฏุงุช ูุฑููุฉ (1ุ 2ุ 3...)
4. ุงุถุบุท "ุจุฏุก ุงูุนูููุฉ"
5. ุฑุงูุจ ุดุฑูุท ุงูุชูุฏู
6. ูุฌุจ ุฃู ูุชู ุฑูุน ุฌููุน ุงููุตูู ุจูุฌุงุญ

### ุงุฎุชุจุงุฑ 4: ุฅุฏุงุฑุฉ ุงููุญุชูู
1. ุงุฐูุจ ุฅูู ุชุจููุจ "ุงููุญุชูู"
2. ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุจุฌููุน ุงููุงูุฌุง
3. ุงุถุบุท ุนูู "ุงููุตูู" ูุฃู ูุงูุฌุง
4. ูุฌุจ ุฃู ุชุฑู ุฌููุน ุงููุตูู
5. ุฌุฑุจ "ุชุนุฏูู" ูุตู
6. ุฌุฑุจ ุชุบููุฑ ุชุฑุชูุจ ุงูุตูุฑ

### ุงุฎุชุจุงุฑ 5: ุฅุฏุงุฑุฉ ุงููุฑูู (Super Admin ููุท)
1. ุงุฐูุจ ุฅูู ุชุจููุจ "ุงููุฑูู"
2. ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุจุฌููุน ุงููุณุชุฎุฏููู
3. ุฌุฑุจ ุชุบููุฑ ุฏูุฑ ุฃุญุฏ ุงููุณุชุฎุฏููู
4. ูุฌุจ ุฃู ูุชู ุงูุชุญุฏูุซ ููุฑุงู

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู:

### ุงููุดููุฉ: ุฒุฑ ููุญุฉ ุงูุชุญูู ูุง ูุธูุฑ
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃูู ูุณุฌู ุฏุฎูู ุจุญุณุงุจ Admin
2. ุงูุชุญ Console ูู ุงููุชุตูุญ (F12)
3. ุงุจุญุซ ุนู ุฃุฎุทุงุก
4. ุชุฃูุฏ ูู ุชุทุจูู ุงูู SQL ุจุดูู ุตุญูุญ

### ุงููุดููุฉ: ูุง ูููู ุญูุธ ุงูุจูุงูุงุช
**ุงูุญู:**
1. ุชุญูู ูู RLS Policies ูู Supabase
2. ุชุฃูุฏ ูู ุฃู ุฏูุฑู ูู `admin` ุฃู `super_admin`
3. ุงูุชุญ Network Tab ูู ุงููุชุตูุญ
4. ุงุจุญุซ ุนู ุฃุฎุทุงุก 403 ุฃู 401

### ุงููุดููุฉ: ุงูุจูุงูุงุช ูุง ุชุธูุฑ
**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงูุจูุงูุงุช ููุฌูุฏุฉ ูู Supabase
2. ุงูุชุญ Table Editor ูู Supabase
3. ุชุญูู ูู ุฌุฏุงูู: mangas, chapters, profiles
4. ุชุฃูุฏ ูู ูุฌูุฏ ุจูุงูุงุช

### ุงููุดููุฉ: ุฎุทุฃ ุนูุฏ ุฑูุน ุนุฏุฉ ูุตูู
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู ููู ZIP ููุธู ุจุดูู ุตุญูุญ:
   ```
   archive.zip
   โโโ 1/
   โ   โโโ 001.jpg
   โ   โโโ 002.jpg
   โ   โโโ ...
   โโโ 2/
   โ   โโโ 001.jpg
   โ   โโโ ...
   โโโ 3/
       โโโ ...
   ```
2. ุชุฃูุฏ ูู ุฃู ุฃุณูุงุก ุงููุฌูุฏุงุช ุฃุฑูุงู ููุท
3. ุชุฃูุฏ ูู ุฃู ุงูุตูุฑ ุจุตูุบุฉ JPG ุฃู PNG

---

## ๐ ูุนูููุงุช ุชูููุฉ:

### ุงูุชุบููุฑุงุช ูู Navbar.tsx:
- ุชู ุฅุตูุงุญ `useEffect` ูุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู
- ุงูุขู ูุฌูุจ ุงูุฏูุฑ ูู ุฌุฏูู `profiles` ุจุดูู ุตุญูุญ
- ูุนุฑุถ ุฒุฑ ููุญุฉ ุงูุชุญูู ููุฃุฏูุงุฑ: `super_admin`, `admin`, `editor`

### ุงูุชุบููุฑุงุช ูู Database:
- ุชู ุฅุถุงูุฉ trigger ุชููุงุฆู ูุฅูุดุงุก profile ุนูุฏ ุงูุชุณุฌูู
- ุชู ุฅุตูุงุญ ุฌููุน RLS Policies
- ุชู ุฅุถุงูุฉ indexes ูุชุญุณูู ุงูุฃุฏุงุก
- ุชู ุงูุชุฃูุฏ ูู ูุฌูุฏ ุฏุงูุฉ `increment_views`

### ุงูุตูุงุญูุงุช ุงูุฌุฏูุฏุฉ:
- **Super Admin**: ูู ุงูุตูุงุญูุงุช + ุฅุฏุงุฑุฉ ุงููุฑูู
- **Admin**: ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงููุงูุฌุง ูุงููุตูู
- **Editor**: ุฅุถุงูุฉ/ุชุนุฏูู ุงููุงูุฌุง ูุงููุตูู (ุจุฏูู ุญุฐู)
- **User**: ูุฑุงุกุฉ ููุท + ุงูููุถูุฉ ุงูุฎุงุตุฉ

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ:

- [ ] ุชู ุชุทุจูู `COMPLETE_DATABASE_FIX_V2.sql` ูู Supabase
- [ ] ุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู (`npm run dev`)
- [ ] ุฒุฑ ููุญุฉ ุงูุชุญูู ูุธูุฑ ูู Navbar
- [ ] ูููู ุงูุฏุฎูู ุฅูู ููุญุฉ ุงูุชุญูู
- [ ] ุฌููุน ุงูุชุจููุจุงุช ุชุธูุฑ ุจุดูู ุตุญูุญ
- [ ] ูููู ุฅุถุงูุฉ ูุงูุฌุง ุฌุฏูุฏุฉ
- [ ] ูููู ุฑูุน ูุตูู
- [ ] ูููู ุฑูุน ุนุฏุฉ ูุตูู (Bulk)
- [ ] ูููู ุชุนุฏูู ุงููุญุชูู
- [ ] ูููู ุญุฐู ุงููุญุชูู
- [ ] (Super Admin) ูููู ุฅุฏุงุฑุฉ ุงููุฑูู

---

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ:

ุจุนุฏ ุชุทุจูู ุฌููุน ุงูุฅุตูุงุญุงุชุ ูุฌุจ ุฃู:
1. โ ูุธูุฑ ุฒุฑ ููุญุฉ ุงูุชุญูู ููู Admins
2. โ ุชุนูู ุฌููุน ูุธุงุฆู ููุญุฉ ุงูุชุญูู
3. โ ูููู ุฅุถุงูุฉ ูุชุนุฏูู ูุญุฐู ุงููุงูุฌุง ูุงููุตูู
4. โ ูููู ุฑูุน ุนุฏุฉ ูุตูู ุฏูุนุฉ ูุงุญุฏุฉ ุจุฏูู ุฃุฎุทุงุก
5. โ ุงูุจูุงูุงุช ุชูุญูุธ ูุชูุฌูุจ ุจุดูู ุตุญูุญ
6. โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

---

**ููุงุญุธุฉ ูููุฉ:** ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉุ ุงูุชุญ Console ูู ุงููุชุตูุญ (F12) ูุฃุฑุณู ูู ุงูุฃุฎุทุงุก ุงูุชู ุชุธูุฑ.
