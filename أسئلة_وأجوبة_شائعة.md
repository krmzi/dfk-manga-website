# โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ (FAQ)

## ๐ ุฃุณุฆูุฉ ุนุงูุฉ

### ุณ1: ูุง ูู ุงููุดุงูู ุงูุชู ูุญููุง ูุฐุง ุงูุฅุตูุงุญุ

**ุฌ:** ูุญู ูุฐุง ุงูุฅุตูุงุญ ุงููุดุงูู ุงูุชุงููุฉ:
- โค๏ธ ุตูุญุฉ ุงูุจูููุงุฑู ุชุจูู ูู ุญุงูุฉ ุชุญููู ูุณุชูุฑ
- ๐ค ูุดู ุฑูุน ุงููุงูุฌุง ูุงููุตูู ุฃุญูุงูุงู
- ๐ฅ ุงูุฃุฏูู ูุง ูุณุชุทูุนูู ุงูุฏุฎูู ุฅูู ููุญุฉ ุงูุชุญูู
- โก ุจุทุก ุงููููุน ุจุดูู ุนุงู
- ๐ ูุดุงูู ุงูุตูุงุญูุงุช (RLS Policies)

---

### ุณ2: ูู ูู ุงูููุช ูุณุชุบุฑู ุงูุฅุตูุงุญุ

**ุฌ:** 
- **ุงูุฅุตูุงุญ ุงูุฃุณุงุณู**: 5-10 ุฏูุงุฆู
- **ุงูุงุฎุชุจุงุฑ**: 5 ุฏูุงุฆู
- **ุงูุชุญุณููุงุช ุงูุฅุถุงููุฉ**: 5 ุฏูุงุฆู (ุงุฎุชูุงุฑู)
- **ุงููุฌููุน**: 10-20 ุฏูููุฉ

---

### ุณ3: ูู ุณุฃููุฏ ุฃู ุจูุงูุงุชุ

**ุฌ:** **ูุงุ ุจุงูุชุฃููุฏ!** 
- ุงูุฅุตูุงุญ ูุนูู ููุท ุนูู RLS Policies ูุงูู Indexes
- ูุง ูุญุฐู ุฃู ุจูุงูุงุช ูู ุงูุฌุฏุงูู
- ุฌููุน ุงููุงูุฌุง ูุงููุตูู ูุงูุจูููุงุฑู ูุงููุณุชุฎุฏููู ุขููุฉ 100%

---

### ุณ4: ูู ูุฌุจ ุฃู ุฃููู ุฎุจูุฑุงู ูู SQLุ

**ุฌ:** **ูุงุ ุฅุทูุงูุงู!**
- ูู ูุง ุนููู ูุนูู ูู ูุณุฎ ููุตู ุงูููุฏ
- ุงูููุฏ ุฌุงูุฒ ูููุฎุชุจุฑ
- ููุท ุงุชุจุน ุงูุฎุทูุงุช ุงูุจุณูุทุฉ

---

## ๐ง ุฃุณุฆูุฉ ุชูููุฉ

### ุณ5: ูุง ูู RLS Policiesุ

**ุฌ:** RLS ุชุนูู Row Level Security (ุฃูุงู ุนูู ูุณุชูู ุงูุตู)
- ุชุญุฏุฏ ูู ููููู ูุฑุงุกุฉ/ูุชุงุจุฉ/ุชุนุฏูู/ุญุฐู ุงูุจูุงูุงุช
- ูุซูุงู: ุงููุณุชุฎุฏู ููููู ุฑุคูุฉ ุจูููุงุฑูู ููุทุ ูููุณ ุจูููุงุฑู ุงูุขุฎุฑูู
- ุงููุดููุฉ ูุงูุช ูู Policies ูุชุถุงุฑุจุฉ ุชููุน ุงููุตูู ุจุดูู ุฎุงุทุฆ

---

### ุณ6: ูุง ูู Indexes ูููุงุฐุง ูุญุชุงุฌูุงุ

**ุฌ:** Indexes ูู ููุงุฑุณ ูุชุณุฑูุน ุงูุจุญุซ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุซู ููุฑุณ ุงููุชุงุจุ ุชุณุงุนุฏ ูู ุฅูุฌุงุฏ ุงูุจูุงูุงุช ุจุณุฑุนุฉ
- ุจุฏูู Indexesุ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุจุญุซ ูู ูู ุงูุณุฌูุงุช (ุจุทูุก ุฌุฏุงู)
- ูุน Indexesุ ุชุฌุฏ ุงูุจูุงูุงุช ููุฑุงู (ุณุฑูุน ุฌุฏุงู)

**ูุซุงู:**
- ุจุฏูู Index: ุงูุจุญุซ ุนู ูุงูุฌุง ูุนููุฉ ูุณุชุบุฑู 2 ุซุงููุฉ
- ูุน Index: ุงูุจุญุซ ุนู ููุณ ุงููุงูุฌุง ูุณุชุบุฑู 0.01 ุซุงููุฉ

---

### ุณ7: ูุง ุงููุฑู ุจูู super_admin ู admin ู editorุ

**ุฌ:**
- **super_admin** (ูุฏูุฑ ุนุงู):
  - ููููู ูุนู ูู ุดูุก
  - ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงููุงูุฌุง ูุงููุตูู
  - ุฅุฏุงุฑุฉ ุงูุฃุฏูู ูุงููุญุฑุฑูู
  - ุงููุตูู ุงููุงูู ูุฌููุน ุงูููุฒุงุช

- **admin** (ูุฏูุฑ):
  - ููููู ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงููุงูุฌุง ูุงููุตูู
  - ูุง ููููู ุฅุฏุงุฑุฉ ุงูุฃุฏูู ุงูุขุฎุฑูู
  - ูุตูู ูุงูู ูููุญุชูู

- **editor** (ูุญุฑุฑ):
  - ููููู ุฅุถุงูุฉ/ุชุนุฏูู ุงููุงูุฌุง ูุงููุตูู ููุท
  - ูุง ููููู ุงูุญุฐู
  - ูุตูู ูุญุฏูุฏ

- **user** (ูุณุชุฎุฏู ุนุงุฏู):
  - ููููู ุงููุฑุงุกุฉ ููุท
  - ุฅุถุงูุฉ ุจูููุงุฑู
  - ูุชุงุจุฉ ุชุนูููุงุช

---

## ๐๏ธ ุฃุณุฆูุฉ ุญูู ุงูุชูููุฐ

### ุณ8: ูู ุฃูู ุฃุญุตู ุนูู Supabase URL ู Anon Keyุ

**ุฌ:**
1. ุงุฐูุจ ุฅูู Supabase Dashboard
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **Settings** โ **API**
4. ุณุชุฌุฏ:
   - **Project URL**: ูุฐุง ูู `NEXT_PUBLIC_SUPABASE_URL`
   - **anon public**: ูุฐุง ูู `NEXT_PUBLIC_SUPABASE_ANON_KEY`
5. ุงูุณุฎููุง ุฅูู ููู `.env.local`

---

### ุณ9: ููู ุฃุชุฃูุฏ ูู ุฃู ุงูุฅุตูุงุญ ูุฌุญุ

**ุฌ:** ููุฐ `DATABASE_DIAGNOSTIC_CHECK.sql` ูุชุญูู ูู:
1. **ุนุฏุฏ ุงูู Policies**: ูุฌุจ ุฃู ูููู ููุงู policies ููู ุฌุฏูู
2. **ุนุฏุฏ ุงูู Indexes**: ูุฌุจ ุฃู ูููู ููุงู indexes ูุชุนุฏุฏุฉ
3. **ุนุฏุฏ ุงูุณุฌูุงุช**: ูุฌุจ ุฃู ุชููู ุงูุจูุงูุงุช ููุฌูุฏุฉ
4. **ุงุฎุชุจุงุฑ ุนููู**:
   - ุตูุญุฉ ุงูุจูููุงุฑู ุชูุชุญ ููุฑุงู
   - ุฒุฑ ููุญุฉ ุงูุชุญูู ุธุงูุฑ
   - ููููู ุฑูุน ูุงูุฌุง

---

### ุณ10: ูุงุฐุง ูู ุฑุฃูุช ุฎุทุฃ ุฃุซูุงุก ุชูููุฐ SQLุ

**ุฌ:** 
1. **ุงูุฑุฃ ุฑุณุงูุฉ ุงูุฎุทุฃ ุจุนูุงูุฉ**
2. **ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ**:
   - `permission denied`: ุชุฃูุฏ ูู ุฃูู ูุณุฌู ุฏุฎูู ูู owner ูููุดุฑูุน
   - `syntax error`: ุชุฃูุฏ ูู ูุณุฎ ุงูููุฏ ุจุงููุงูู
   - `relation does not exist`: ุชุฃูุฏ ูู ุฃู ุงูุฌุฏุงูู ููุฌูุฏุฉ
3. **ุงูุญู**:
   - ุงูุณุฎ ุฑุณุงูุฉ ุงูุฎุทุฃ ูุงููุฉ
   - ุดุงุฑููุง ูุนู ูุชุญููููุง

---

## ๐ ุฃุณุฆูุฉ ุญูู ุงููุดุงูู

### ุณ11: ุงูุจูููุงุฑู ูุง ุชุฒุงู ูุง ุชุนููุ ูุงุฐุง ุฃูุนูุ

**ุฌ:**
1. **ุงูุชุญ Developer Console** (F12)
2. **ุงุฐูุจ ุฅูู Console**
3. **ุญุงูู ุงูุฏุฎูู ุฅูู `/bookmarks`**
4. **ุงุจุญุซ ุนู ุฃุฎุทุงุก ุจุงูููู ุงูุฃุญูุฑ**
5. **ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ**:
   - `policy violation`: ููุฐ `DATABASE_COMPLETE_FIX_2025.sql` ูุฑุฉ ุฃุฎุฑู
   - `network error`: ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
   - `unauthorized`: ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู
6. **ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ**: ุดุงุฑู ูุนู ููุทุฉ ุดุงุดุฉ ููุฎุทุฃ

---

### ุณ12: ุฒุฑ ููุญุฉ ุงูุชุญูู ูุง ูุธูุฑุ ูุงุฐุง ุฃูุนูุ

**ุฌ:**
1. **ุชุญูู ูู ุฏูุฑู**:
   ```sql
   SELECT email, role FROM profiles WHERE email = 'your-email@example.com';
   ```
2. **ูุฌุจ ุฃู ูููู role = 'super_admin' ุฃู 'admin'**
3. **ุฅุฐุง ูุงู 'user'ุ ููุฐ**:
   ```sql
   UPDATE profiles SET role = 'super_admin' WHERE email = 'your-email@example.com';
   ```
4. **ุณุฌู ุงูุฎุฑูุฌ ูุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู**
5. **ุงูุณุญ ุงูู Cache** (Ctrl+Shift+Delete)
6. **ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ**

---

### ุณ13: ุฑูุน ุงูุตูุฑ ููุดูุ ูุงุฐุง ุฃูุนูุ

**ุฌ:**
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ**:
1. **ุงูุตูุฑ ูุจูุฑุฉ ุฌุฏุงู**:
   - ุงูุญู: ููู ุญุฌู ุงูุตูุฑ ูุจู ุงูุฑูุน
   - ุงุณุชุฎุฏู: TinyPNG ุฃู Squoosh
   - ุงูุญุฏ ุงูุฃูุตู ุงูููุตู ุจู: 5MB ููู ุตูุฑุฉ

2. **ูุดุงูู ูู Storage**:
   - ุชุญูู ูู ุฅุนุฏุงุฏุงุช Storage ูู Supabase
   - ุชุฃูุฏ ูู ุฃู Bucket ููุฌูุฏ
   - ุชุฃูุฏ ูู ุฃู RLS Policies ุตุญูุญุฉ

3. **ูุดุงูู ูู ุงูุงุชุตุงู**:
   - ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
   - ุญุงูู ูุฑุฉ ุฃุฎุฑู

---

### ุณ14: ุงููููุน ูุง ูุฒุงู ุจุทูุฆุงูุ ูุงุฐุง ุฃูุนูุ

**ุฌ:**
1. **ููุฐ `PERFORMANCE_OPTIMIZATION.sql`**
2. **ุชูุนูู Connection Pooling**:
   - ุงุฐูุจ ุฅูู Supabase Dashboard
   - Settings โ Database
   - Connection pooling โ Enable
3. **ุงุณุชุฎุฏู CDN ููุตูุฑ**:
   - Supabase Storage ูุฏุนู CDN ุชููุงุฆูุงู
4. **ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช**:
   ```sql
   ANALYZE mangas;
   ANALYZE chapters;
   ANALYZE bookmarks;
   ```

---

## ๐ฅ ุฃุณุฆูุฉ ุญูู ุงูุฃุฏูู

### ุณ15: ููู ุฃุถูู ุฃุฏูู ุขุฎุฑููุ

**ุฌ:**
```sql
-- ุฅุถุงูุฉ ุฃุฏูู ูุงุญุฏ
UPDATE profiles 
SET role = 'admin' 
WHERE email = 'admin@example.com';

-- ุฅุถุงูุฉ ุนุฏุฉ ุฃุฏูู
UPDATE profiles 
SET role = 'admin' 
WHERE email IN (
    'admin1@example.com',
    'admin2@example.com',
    'admin3@example.com'
);
```

---

### ุณ16: ููู ุฃุฒูู ุตูุงุญูุงุช ุงูุฃุฏูู ูู ุดุฎุตุ

**ุฌ:**
```sql
UPDATE profiles 
SET role = 'user' 
WHERE email = 'ex-admin@example.com';
```

---

### ุณ17: ููู ุฃุฑู ูุงุฆูุฉ ุจุฌููุน ุงูุฃุฏููุ

**ุฌ:**
```sql
SELECT 
    email,
    role,
    created_at
FROM profiles
WHERE role IN ('super_admin', 'admin', 'editor')
ORDER BY 
    CASE role
        WHEN 'super_admin' THEN 1
        WHEN 'admin' THEN 2
        WHEN 'editor' THEN 3
    END,
    created_at DESC;
```

---

## ๐ ุฃุณุฆูุฉ ุญูู ุงููุฑุงูุจุฉ

### ุณ18: ููู ุฃุฑุงูุจ ุฃุฏุงุก ุงููููุนุ

**ุฌ:**
1. **ูู Supabase Dashboard**:
   - ุงุฐูุจ ุฅูู **Reports**
   - ุฑุงูุจ ุนุฏุฏ ุงูุงุณุชุนูุงูุงุช
   - ุฑุงูุจ ููุช ุงูุงุณุชุฌุงุจุฉ

2. **ุงุณุชุนูุงูุงุช ูููุฏุฉ**:
   ```sql
   -- ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุดุทูู
   SELECT COUNT(DISTINCT user_id) 
   FROM bookmarks
   WHERE created_at > NOW() - INTERVAL '7 days';
   
   -- ุฃูุซุฑ ุงููุงูุฌุง ุดุนุจูุฉ
   SELECT title, views, rating
   FROM mangas
   ORDER BY views DESC
   LIMIT 10;
   ```

---

### ุณ19: ููู ุฃุนุฑู ุญุฌู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ

**ุฌ:**
```sql
-- ุญุฌู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููู
SELECT pg_size_pretty(pg_database_size(current_database()));

-- ุญุฌู ูู ุฌุฏูู
SELECT 
    tablename,
    pg_size_pretty(pg_total_relation_size('public.'||tablename))
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size('public.'||tablename) DESC;
```

---

## ๐ ุฃุณุฆูุฉ ุญูู ุงูุตูุงูุฉ

### ุณ20: ูู ูุฌุจ ุฃู ุฃููุฐ ูุฐุง ุงูุฅุตูุงุญ ุจุดูู ุฏูุฑูุ

**ุฌ:** **ูุง**ุ ูุฐุง ุฅุตูุงุญ ููุฑุฉ ูุงุญุฏุฉ ููุท.

ููู ูููุตุญ ุจู:
1. **ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุดูุฑูุงู**:
   ```sql
   ANALYZE mangas;
   ANALYZE chapters;
   ANALYZE bookmarks;
   ```

2. **ุชูุธูู ุงูุจูุงูุงุช ุงููุฏููุฉ** (ุงุฎุชูุงุฑู):
   ```sql
   -- ุญุฐู ุงูุจูููุงุฑู ูููุงูุฌุง ุงููุญุฐููุฉ
   DELETE FROM bookmarks 
   WHERE manga_id NOT IN (SELECT id FROM mangas);
   ```

3. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก** ุจุดูู ุฏูุฑู

---

### ุณ21: ูุงุฐุง ูู ุฃุถูุช ุฌุฏุงูู ุฌุฏูุฏุฉ ูู ุงููุณุชูุจูุ

**ุฌ:** ูุฌุจ ุฅุถุงูุฉ RLS Policies ููุง:
```sql
-- ูุซุงู: ุฌุฏูู ุฌุฏูุฏ ุงุณูู "ratings"
ALTER TABLE ratings ENABLE ROW LEVEL SECURITY;

CREATE POLICY "ratings_select_policy" ON ratings
    FOR SELECT
    USING (true);

CREATE POLICY "ratings_insert_policy" ON ratings
    FOR INSERT
    TO authenticated
    WITH CHECK (auth.uid() = user_id);
```

---

## ๐ ุฃุณุฆูุฉ ุญูู ุงูุฏุนู

### ุณ22: ูุงุฐุง ูู ูุงุฌูุช ูุดููุฉ ูู ุชูุฐูุฑ ููุงุ

**ุฌ:**
1. **ุงูุชุญ Developer Console** (F12)
2. **ุงูุณุฎ ุฑุณุงูุฉ ุงูุฎุทุฃ ูุงููุฉ**
3. **ุดุงุฑู ูุนู**:
   - ููุทุฉ ุดุงุดุฉ ููุฎุทุฃ
   - ุฑุณุงุฆู ุงูู Console
   - ุงูุฎุทูุงุช ุงูุชู ููุช ุจูุง
   - ูุชุงุฆุฌ `DATABASE_DIAGNOSTIC_CHECK.sql`

---

### ุณ23: ูู ูููููู ุงูุชูุงุตู ูุนู ูููุณุงุนุฏุฉุ

**ุฌ:** **ุจุงูุชุฃููุฏ!** 
- ุดุงุฑู ูุนู ุฃู ูุดููุฉ ุชูุงุฌููุง
- ุณุฃุณุงุนุฏู ูู ุญููุง ุฎุทูุฉ ุจุฎุทูุฉ
- ูุง ุชุชุฑุฏุฏ ูู ุงูุณุคุงู ุนู ุฃู ุดูุก

---

## โ ุงูุฎูุงุตุฉ

- ๐ ูุฐุง ุงูุฅุตูุงุญ ุดุงูู ูุขูู
- โฑ๏ธ ูุณุชุบุฑู 10-20 ุฏูููุฉ ููุท
- ๐ ูุง ูุญุฐู ุฃู ุจูุงูุงุช
- โก ูุญุณู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ
- ๐ฅ ูุญู ูุดุงูู ุงูุฃุฏูู ููุงุฆูุงู
- โค๏ธ ูุตูุญ ุงูุจูููุงุฑู ูุงูููุฒุงุช ุงูุฃุฎุฑู

**ุงุจุฏุฃ ุงูุขู ูู ููู `ุงุจุฏุฃ_ูู_ููุง_README.md`!** ๐
